model activities {
  activity_id BigInt   @id @default(autoincrement())
  user_id     BigInt
  activity    String   @db.VarChar(255)
  module      String   @db.VarChar(255)
  created_on  DateTime @db.Timestamp(6)
  deleted     Int      @default(0) @db.SmallInt
}

model approval {
  id              Int      @id @default(autoincrement())
  kode_layanan    String   @db.VarChar(3)
  tgl_buat        DateTime @default(now()) @db.Timestamp(6)
  id_transaksi    Int
  id_pemohon      Int?
  status_total    Int      @default(0) @db.SmallInt
  status_approval Int      @default(0) @db.SmallInt
}

model approval_items {
  id              Int       @id @default(autoincrement())
  role_id         Int
  status_approval Int       @default(0)
  tgl_proses      DateTime? @db.Timestamp(6)
  approval_id     Int
  index           Int
}

model approval_items_desc {
  id               Int      @id @default(autoincrement())
  approval_item_id Int
  user_id          Int
  description      String
  status_approval  Int      @db.SmallInt
  tgl_proses       DateTime @default(now()) @db.Timestamp(6)
}

model authority {
  id           Int    @id @default(autoincrement())
  kode_layanan String @db.VarChar(255)
}

model authority_items {
  id           Int @id @default(autoincrement())
  index        Int
  authority_id Int
  role_id      Int
}

model cost_center {
  id   Int    @id
  nama String @db.VarChar(255)
  type String @db.VarChar(50)
}

model email_queue {
  id             Int       @id @default(autoincrement())
  to_email       String    @db.VarChar(254)
  subject        String    @db.VarChar(255)
  message        String
  alt_message    String?
  max_attempts   Int
  attempts       Int
  success        Int       @db.SmallInt
  date_published DateTime? @db.Timestamp(6)
  last_attempt   DateTime? @db.Timestamp(6)
  date_sent      DateTime? @db.Timestamp(6)
  csv_attachment String?
}

model login_attempts {
  id         BigInt   @id @default(autoincrement())
  ip_address String   @db.VarChar(45)
  login      String   @db.VarChar(255)
  time       DateTime @db.Timestamp(6)
}

// model permissions {
//   permission_id Int    @id @default(autoincrement())
//   name          String @db.VarChar(255)
//   description   String @db.VarChar(100)
//   status        String @default("active") @db.VarChar(8)
// }

model reg_districts {
  id            String         @id @db.Char(6)
  regency_id    String         @db.Char(4)
  name          String         @db.VarChar(255)
  reg_regencies reg_regencies  @relation(fields: [regency_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "district_regency_foreign")
  reg_villages  reg_villages[]

  @@index([regency_id], map: "districts_regency_id_index")
}

model reg_provinces {
  id            String          @id @db.Char(2)
  name          String          @db.VarChar(255)
  reg_regencies reg_regencies[]
}

model reg_regencies {
  id            String          @id @db.Char(4)
  province_id   String          @db.Char(2)
  name          String          @db.VarChar(255)
  reg_districts reg_districts[]
  reg_provinces reg_provinces   @relation(fields: [province_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "regency_province_foreign")

  @@index([province_id], map: "regencies_province_id_index")
}

model reg_villages {
  id            String        @id @db.Char(10)
  district_id   String        @db.Char(6)
  name          String        @db.VarChar(255)
  reg_districts reg_districts @relation(fields: [district_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "village_district_foreign")

  @@index([district_id], map: "villages_district_id_index")
}

model registrations {
  id            Int      @id(map: "registration_pkey") @default(autoincrement())
  email         String   @db.VarChar(255)
  nik           String   @db.VarChar(255)
  nama          String   @db.VarChar(255)
  jenis_kelamin String   @db.VarChar(255)
  tgl_lahir     DateTime @db.Date
  alamat        String   @db.VarChar(500)
  user_id       Int?
  role_id       Int?
  file_code     String?  @db.VarChar
  no_telp       String?  @db.VarChar(255)
  kecamatan     String?  @db.VarChar(255)
  kelurahan     String?  @db.VarChar(255)
}

// model role_permissions {
//   role_id       Int
//   permission_id Int

//   @@id([role_id, permission_id])
// }

// model roles {
//   role_id           Int    @id @default(autoincrement())
//   role_name         String @db.VarChar(60)
//   description       String @db.VarChar(255)
//   default           Int    @default(0) @db.SmallInt
//   can_delete        Int    @default(0) @db.SmallInt
//   login_destination String @default("/") @db.VarChar(255)
//   default_context   String @default("content") @db.VarChar(255)
//   deleted           Int    @default(0) @db.SmallInt
// }

// model sessions {
//   session_id    String @id @db.VarChar(40)
//   ip_address    String @db.VarChar(45)
//   user_agent    String @db.VarChar(120)
//   last_activity BigInt
//   user_data     String
// }

model users {
  id                   BigInt    @id @default(autoincrement())
  role_id              Int
  email                String    @db.VarChar(254)
  username             String    @db.VarChar(30)
  password_hash        String    @db.Char(60)
  reset_hash           String?   @db.VarChar(40)
  last_login           DateTime? @db.Timestamp(6)
  last_ip              String    @db.VarChar(45)
  created_on           DateTime  @db.Timestamp(6)
  deleted              Int       @default(0) @db.SmallInt
  reset_by             Int?
  banned               Int       @db.SmallInt
  ban_message          String?   @db.VarChar(255)
  display_name         String    @db.VarChar(255)
  display_name_changed DateTime? @db.Date
  timezone             String    @db.VarChar(40)
  language             String    @db.VarChar(20)
  active               Int       @db.SmallInt
  activate_hash        String    @db.VarChar(40)
  force_password_reset Int?      @db.SmallInt

  @@index([email], map: "email")
}